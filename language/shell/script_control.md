# Shell 脚本控制

## 脚本优先级设置

当机器资源不足以满足大量进程全速运行时，Linux 系统很根据进程的优先级来判断哪些进程高优执行、哪些进程低优执行。

而控制脚本的优先级则可以使用 `nice` 和 `renice` 命令。


## 脚本资源控制

很多时候，我们会在一台机器上执行多个进程，为了避免其中个别进程运行异常从而占用大量资源，导致影响其他进程，我们可以对进程的资源进行限制。


## 信号捕获

先来了解一下什么是信号捕获，当我们一个脚本在执行过程中，我们可能希望给脚本发送一些信号，从而可以让脚本进行一些操作，比如优雅退出等。

例如:

1. kill 操作默认会发送15号信号给引用程序。
2. control + C 会发送 2 号信号给应用程序。
3. 9 号信号是强制杀进程，不可以被捕获。


示例代码如下：

```shell
trap "echo sig 15" 15

echo $$

while  : ; do
    :
done
```

当该命令启动后，我们通过默认的 kill 命令终止该进程时，是无法正常退出该进程的，就是因为默认的 15 号进程被捕获了。
此时，只能通过 `kill -9` 来杀死指定进程。
