# Shell 重定向

对于一个进程而言，其默认会接收来自终端键盘输入的内容作为输入信息，而准备输出和错误输出信息则默认同样也会打印到终端中。

而重定向其实就是指修改输入输出的默认位置，使得进程的输入输出与文件进行交互，而非默认的终端终端。

## 输入重定向符号 <

对于重定向是指将一个文件的内容作为输入传给某个 shell 进程。

我们以 `wc -l` 命令为例，它本身可以接收一段文本输入，进行文本中包含的行数。

因此，假设我们需要统计 `readme.md` 文件的行数，那么可以执行如下命令:

```shell
wc -l < ./readme.md
```

对于接收变量赋值也可以使用输入重定向符号：

```shell
read var1 < ./var1.md
```

## 输出重定向符号 >, >>, 2>, &>

对于一个shell命令而言，默认它的输出信息会打印到终端。（包括标准输出和标准错误输出）

而很多时候，我们希望能够将相关输出到一个文件中进行持久化保存。

针对输出的重定向，shell 支持了如下几个操作符：

1. `>` 将标准输出重定向到指定文件中，如果之前文件中已有内容，已有内容会被清空。
2. `>>` 将标准输出重定向到指定文件中，如果之前文件中已有内容，会在已有内容上追加。
3. `2>` 将标准错误输出重定向到指定文件中，如果之前文件中已有内容，已有内容会被清空。
4. `&>` 将标准输出和标准错误输出重定向到指定文件中，如果之前文件中已有内容，已有内容会被清空。

Ps: `2>>`, `&>>` 也均可以实现追加的功能，此处不再赘述。

## 输入输出组合重定向使用

在 shell 脚本中，有时在一些场景（如生成配置文件时），我们可能会将输入和输出组合在一起使用。

我可能来看一个示例：

```shell
cat > a.conf <<EOF
a=123
b=456
c="hello world!"
EOF
```

我们来解读一下上述 shell 命令：

1. 首先，cat 命令的输出被重定向到了 `a.conf` 文件中，即 `a.conf` 是我们希望生成的一个文件。
2. cat 命令的输入是以 EOF 开头，EOF结尾的一段输入文本（不包含EOF）。
3. 其中，`EOF` 仅仅是此处指定的开头结尾的标识，实际也可以换成其他任意标识，只要保证开头结尾一致即可。

